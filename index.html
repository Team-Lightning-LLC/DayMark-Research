<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Deep Research Agent</title>
<link rel="stylesheet" href="css/styles.css">
<!-- Required libraries for markdown processing -->
<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>
<body>
  <!-- Header -->
  <div class="header">
    <div class="logo-section">
      <div class="logo">DM</div>
      <div class="brand-info">
        <h1>DayMark Scout</h1>
        <div class="subtitle">By Doculabs</div>
      </div>
    </div>
    <h1 class="header-title"> Agentic Financial Research </h1>
  </div>

    <!-- Secondary Nav -->
  <nav class="secondary-nav">
    <div class="secondary-links">
      <div class="secondary-link"> </div>
      <div class="secondary-link"> </div>
      <div class="secondary-link"> </div>
      <div class="secondary-link"> </div>
    </div>
  </nav>
  
 <!-- Hero -->
  <header class="research-banner">
    <h2> </h2>
  </header>
  <!-- Shell -->
  <section class="shell">
    <!-- Left: Documents -->
    <aside class="left">
      <div class="panel-head">
        <span class="panel-title">Research Library</span>
        <div class="filters">
          <button class="chip active" data-filter="All">All</button>
          <button class="chip" data-filter="Markets">Markets</button>
          <button class="chip" data-filter="Sectors">Sectors</button>
          <button class="chip" data-filter="Assets">Assets</button>
          <button class="chip" data-filter="Concepts">Concepts</button>
        </div>
      </div>
      <div class="left-body">
        <div class="searchBox" style="padding:0 0 12px 0">
          <input id="docSearch" placeholder="Search documents…"/>
        </div>
        <div id="docsPane">
          <div class="empty">Loading your research library...</div>
        </div>
      </div>
    </aside>

<!-- Right: Generation -->
<main class="right">
  <div class="panel-head"><span class="panel-title" id="centerTitle">Create Research</span></div>
  <div class="console">
    
    <!-- Research Type Selection -->
    <div class="section">
      <h3>Research Type</h3>
      <div class="type-grid">
        <button class="type-card" data-type="Evaluation">
          <div class="type-icon">📊</div>
          <div class="type-name">Evaluation</div>
          <div class="type-desc">Company deep dives & analysis</div>
        </button>
        <button class="type-card" data-type="Comparative">
          <div class="type-icon">⚖️</div>
          <div class="type-name">Comparative</div>
          <div class="type-desc">Multi-stock comparisons</div>
        </button>
        <button class="type-card" data-type="Scenarios">
          <div class="type-icon">🎯</div>
          <div class="type-name">Scenarios</div>
          <div class="type-desc">What-if modeling</div>
        </button>
        <button class="type-card" data-type="Mapping">
          <div class="type-icon">🗺️</div>
          <div class="type-name">Mapping</div>
          <div class="type-desc">Networks & relationships</div>
        </button>
        <button class="type-card" data-type="Narrative">
          <div class="type-icon">📖</div>
          <div class="type-name">Narrative</div>
          <div class="type-desc">Stories & sentiment</div>
        </button>
        <button class="type-card" data-type="Historics">
          <div class="type-icon">📅</div>
          <div class="type-name">Historics</div>
          <div class="type-desc">Patterns & precedents</div>
        </button>
        <button class="type-card" data-type="Concepts">
          <div class="type-icon">💡</div>
          <div class="type-name">Concepts</div>
          <div class="type-desc">Educational topics</div>
        </button>
      </div>
    </div>

    <!-- Analysis Scale -->
    <div class="section">
      <h3>Analysis Scale</h3>
      <div class="scale-container">
        <div class="scale-track">
          <button class="scale-stop" data-scale="Market">
            <div class="scale-label">Market</div>
            <div class="scale-hint">Macro trends</div>
          </button>
          <button class="scale-stop active" data-scale="Sector">
            <div class="scale-label">Sector</div>
            <div class="scale-hint">Industry focus</div>
          </button>
          <button class="scale-stop" data-scale="Asset">
            <div class="scale-label">Asset</div>
            <div class="scale-hint">Individual stocks</div>
          </button>
        </div>
      </div>
    </div>

    <!-- Custom Query Input -->
    <div class="section">
      <h3>Research Query</h3>
      <textarea 
        id="customQuery" 
        placeholder="Type your research question or specify stocks (e.g., 'Compare NVDA, AMD, INTC performance over 3 years' or 'What's driving semiconductor demand?')"
        rows="4"
      ></textarea>
      <div class="query-hints">
        <span class="hint-chip">💡 Try: Stock tickers (AAPL, MSFT)</span>
        <span class="hint-chip">💡 Try: Time periods (last 5 years)</span>
        <span class="hint-chip">💡 Try: Specific questions</span>
      </div>
    </div>

    <!-- Quick Suggestions (optional - shows based on selected type) -->
    <div class="section" id="suggestionsSection" style="display:none;">
      <h3>Suggestions</h3>
      <div class="suggestion-pills" id="suggestionPills">
        <!-- Dynamically populated based on research type -->
      </div>
    </div>

    <!-- Research Parameters -->
    <div class="section ctx-compact" id="ctxSection">
      <div class="ctx-head"><h3>Research Parameters</h3></div>
      <div class="ctx-grid">
        <div class="ctx-block">
          <div class="ctx-label">Depth</div>
          <div class="seg" role="radiogroup" aria-label="Depth">
            <button type="button" class="seg-option is-active" data-group="depth" data-value="High-Level">High-Level</button>
            <button type="button" class="seg-option" data-group="depth" data-value="Focused">Focused</button>
            <button type="button" class="seg-option" data-group="depth" data-value="Comprehensive">Comprehensive</button>
          </div>
        </div>
        <div class="ctx-block">
          <div class="ctx-label">Rigor</div>
          <div class="seg" role="radiogroup" aria-label="Rigor">
            <button type="button" class="seg-option" data-group="rigor" data-value="Essential">Essential</button>
            <button type="button" class="seg-option is-active" data-group="rigor" data-value="Detailed">Detailed</button>
            <button type="button" class="seg-option" data-group="rigor" data-value="Exhaustive">Exhaustive</button>
          </div>
        </div>
        <div class="ctx-block">
          <div class="ctx-label">Focus</div>
          <div class="seg" role="radiogroup" aria-label="Focus">
            <button type="button" class="seg-option is-active" data-group="focus" data-value="Investment">Investment</button>
            <button type="button" class="seg-option" data-group="focus" data-value="Educational">Educational</button>
            <button type="button" class="seg-option" data-group="focus" data-value="Technical">Technical</button>
          </div>
        </div>
      </div>
      <div id="ctxSummary" class="ctx-summary">High-Level • Detailed • Investment</div>
    </div>

    <!-- Generate Button -->
    <div class="generate-row">
      <button class="btn primary" id="createBtn">Generate Research</button>
    </div>
  </div>
</main>

<!-- Generation Progress Toast - Collapsible -->
<div id="generationToast" class="toast-notification">
  <div class="toast-header">
    <div class="toast-icon">
      <div class="toast-spinner"></div>
    </div>
    <div class="toast-title-section">
      <div class="toast-title">Generating Research...</div>
      <div class="toast-subtitle">Estimated time: <span id="timeRemaining">5:00</span></div>
    </div>
    <button class="toast-minimize" id="toastMinimize">−</button>
    <button class="toast-close" id="toastClose">×</button>
  </div>
  <div class="toast-body" id="toastBody">
    <div class="toast-details"></div>
  </div>
</div>

<!-- Document Viewer Modal -->
<dialog id="viewer" aria-label="Document viewer">
  <div class="viewer-head">
    <div class="viewer-title" id="viewerTitle">Document</div>
    <div class="viewer-actions">
      <button type="button" class="viewer-btn" id="downloadPDF">Download PDF</button>
      <button type="button" class="viewer-close" id="closeViewer">Close</button>
    </div>
  </div>
  <div id="viewerFrame" class="viewer-content"></div>
</dialog>

<!-- Application Scripts -->
<script src="js/config.js"></script>
<script src="js/vertesia-api.js"></script>
<script src="js/markdown-viewer.js"></script>
<script src="js/research-engine.js"></script>
<script src="js/app.js"></script>

</body>
</html>
